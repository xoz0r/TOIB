# Практическое задание "Контроль целостности"
## Подготовленная виртуальная машина с Astra linux
Для выполнения данного задания был скачан образ Astra Linux и установлена версия системы "Смоленск" с максимальным уровнем защиты<br /><br />
![Снимок1](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/451b25b0-a39f-4218-a340-7a62f829c76d)

## Настройка и проверка мандатного контроля целостности
Для измнения конфигурации МКЦ в ОС Astra Linux необходимо воспользоваться утилитой Управление политикой безопасности<br /><br />
![Снимок2](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/ab7004c0-06ae-45cc-9220-8bc5acee30b8)

В меню Режим эксперта можно непосредственно назначить уровни целостности для директорий. В качестве проверки правила NWU я обозначил 2 тестовые директории с такими правами:<br /><br />
![Снимок3](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/93b3f13b-c649-4644-8a03-a3fe85500b3b)

Для проверки мандатного контроля необходимо зайти в учетную запись с атрибутом целостности уровня "Низкий".<br />
Ниже представлен пример взаимодействия по записи между обеими папками<br /><br />
![Снимок4](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/a5bc9aaf-8f23-4b3c-ab45-654d5d3efabf)

Здесь можно увидеть, что копирование файла с атрибутом ниже в папку с атрибутом выше не сработало - была получена ошибка доступа. В то же время "запись вниз" работает.
## Работа с режимом замкнутой программной среды
Для проверки работы режима ЗПС в Управлении политикой безопасности необходимо включить данные настройки:<br /><br />
![Снимок5](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/45bfa5d6-924e-49aa-a566-9b3794b9f779)

В качестве ![Снимок6](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/299bd019-f0f9-4266-b5a1-a9d793a2b2ad)
тестового файла был взят скрипт инициализации Discord. Результат выполнения на скриншоте:<br /><br />

## Работа с утилитами контроля целостности и регламентного контроля целостности
### Использование `gostsum`
Утилита `gostsum` вычисляет хэш-сумму файлов в соответствии с ГОСТ Р 34.11-2012. Пример использования с .deb пакетом:<br /><br />
![Снимок7](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/b3762918-0da9-4210-92df-82d12aaf04b7)

### Использование `afick`
`afick` - утилита, предназначенная для контроля целостности файловой системы ОС. Для корректной работы утилиты сначала создается БД утилиты:<br /><br />
![Снимок10](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/da048d78-6dd1-4c1b-b384-36080039b554)


Далее изменим часть системных файлов для получения ответа от утилиты, перед этим сделав бэкап:<br /><br />
![Снимок9](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/bd9fc05c-8450-40ad-ba7d-418e1ed1f2bf)

Получаем результат от утилиты:<br /><br />
![Снимок10](https://github.com/xoz0r/TOIB_Bakin/assets/145142526/e22335c1-4ad9-4f80-9964-b5a7552cb246)

